<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ajax form submit sample</title>
</head>
<body>

<form name="form-setusername" id="form-setusername" >
    <input type="text" id="username" name="username" rows="1" />
    <span id="text_username"></span>
    <input type="submit" name="submit" id="submit" data-url="change_userinfo.php">
 </form>

<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="js/afs.js"></script>
<script>

	function beforepost(targetform) {
        if ($('#username').val().length==0) {
            alertMessage("用户名不能为空","error");
            return false;
        }		
		return true;
	}
	function afterpost(retdata) {
		$('#text_username').html(retdata.data.username);
	 }

	$(function(){
		localStorage.isSubmiting = 0;
		$('#form-setusername input[type="submit"]').on("click", {
	        target: "#form-setusername",
	        afterpost: "afterpost",
	        beforepost: "beforepost",
	    }, ajaxFormSubmit);

	});  
	
</script>	


</body>
</html>

